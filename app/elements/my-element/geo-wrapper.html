
<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/paper-material/paper-material.html">
<link rel="import" href="../../bower_components/iron-resizable-behavior/iron-resizable-behavior.html">
<link rel="import" href="./geo-chart.html">

<dom-module id="geo-wrapper">
  <template>
    <style include="shared-styles">
      :host {
        display: block;
        display: block;
        width:100%;  
      }   
        #geochartWrapper{
        }
    </style>
<!-- A geospatial view, identifying the number of employees at various company locations. -->    
    <paper-material elevation="1">
        <div id="geochartWrapper">
            <geo-chart data-array="[[dataArray]]"></geo-chart>
        </div>   
    </paper-material>
  </template>

  <script>

      Polymer({
        is: 'geo-wrapper',

        properties: {
            dataArray:{
                type: Array,
                value: function(){return [];}
            },
            dataName:{
                type: String,
            }
        },
        behaviors: [
            Polymer.IronResizableBehavior
        ],  
        setArray: function(data) {
            this.set("dataArray", data);
            console.log(this.dataArray);
        },
        parseData: function(url, callBack) {
            Papa.parse(url, {
                header: false,
                dynamicTyping: true,
                download: true,
                complete: function(results) {
                    callBack(results.data);
                }
            });
        },
        
        ready: function() {
            var dataPath = "../../data/"+this.dataName;
            this.parseData(dataPath, this.setArray.bind(this));         
        },
          
        attached: function(){
            //console.log("wrapper attached:"+this.dataArray);    
        }  
          
      });
  </script>
</dom-module>
